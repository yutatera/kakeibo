<!doctype html>
<html>

<head>
  <meta charset="UTF-8">
  <title>家計簿</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>
  <script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.22/vue.min.js'></script>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
  <style type="text/css">
    .sidebar {
      top:70px;
      position: -webkit-sticky;
      position: sticky;
    }
    body { padding-top: 70px; }
  </style>
</head>
  
<body>
  <!--ナビゲーションウィンドウ-->
  <nav class="navbar navbar-expand navbar-dark bg-dark fixed-top">
    <div class="navbar-brand">家計簿</div>
    <div class="navbar-nav">
      <a class="nav-item nav-link" href="index">推移</a>
      <a class="nav-item nav-link" href="month">月毎・年度毎</a>
      <a class="nav-item nav-link active" href="future">予測</a>
    </div>
  </nav>
  <div class="container-fluid">
  <div class="row">
    <!--サイドバー-->
    <nav class="col-2 bg-light sidebar">
    <ul class="nav flex-column"></ul>
    </nav>

    <!--メイン-->
    <main role="main" class="col-md-7">
    <h1>予測</h1>
    <canvas id="graph" height="50%" width="100%"></canvas>
    <div id="tbl"></div>
    </main>
  </div>
  </div>
  <script>
    sampleData = {"/getGraph_future": {"type": "line", "options": {"elements": {"line": {"tension": 0.1}}, "scales": {"yAxes": [{"stacked": true, "ticks": {"beginAtZero": true}}]}, "legend": {"display": true}}, "data": {"labels": ["200104", "200105", "200106", "200107", "200108", "200109", "200110", "200111", "200112", "200201", "200202", "200203", "200204", "200205", "200206", "200207", "200208", "200209", "200210", "200211", "200212", "200301", "200302", "200303", "200304", "200305", "200306", "200307", "200308", "200309", "200310", "200311", "200312", "200401", "200402", "200403", "200404", "200405", "200406", "200407", "200408", "200409", "200410", "200411", "200412", "200501", "200502", "200503", "200504", "200505", "200506", "200507", "200508", "200509", "200510", "200511", "200512", "200601", "200602", "200603", "200604", "200605", "200606", "200607", "200608", "200609", "200610", "200611", "200612", "200701", "200702", "200703"], "datasets": [{"fill": true, "backgroundColor": "rgba(  0,   0, 255, 0.5)", "borderColor": "rgb(  0,   0, 255)", "label": "実績", "data": [11203337, 11208137, 11139297, 11123151, 11102316, 11275755, 11348379, 11342818, 11558777, 11740709, 11588624, 11759281, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]}, {"fill": "-1", "backgroundColor": "rgba(  0, 203, 255, 0.5)", "borderColor": "rgb(  0, 203, 255)", "label": "予測", "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11962618, 11967418, 11898578, 11882432, 11861597, 12035036, 12107660, 12102099, 12318058, 12499990, 12347905, 12518562, 12721899, 12726699, 12657859, 12641713, 12620878, 12794317, 12866941, 12861380, 13077339, 13259271, 13107186, 13277843, 13481180, 13485980, 13417140, 13400994, 13380159, 13553598, 13626222, 13620661, 13836620, 14018552, 13866467, 14037124, 14240461, 14245261, 14176421, 14160275, 14139440, 14312879, 14385503, 14379942, 14595901, 14777833, 14625748, 14796405, 14999742, 15004542, 14935702, 14919556, 14898721, 15072160, 15144784, 15139223, 15355182, 15537114, 15385029, 15555686]}]}}, "/getTable_future": [["月", "実績", "予測"], ["200703", "0", "15,555,686"], ["200702", "0", "15,385,029"], ["200701", "0", "15,537,114"], ["200612", "0", "15,355,182"], ["200611", "0", "15,139,223"], ["200610", "0", "15,144,784"], ["200609", "0", "15,072,160"], ["200608", "0", "14,898,721"], ["200607", "0", "14,919,556"], ["200606", "0", "14,935,702"], ["200605", "0", "15,004,542"], ["200604", "0", "14,999,742"], ["200603", "0", "14,796,405"], ["200602", "0", "14,625,748"], ["200601", "0", "14,777,833"], ["200512", "0", "14,595,901"], ["200511", "0", "14,379,942"], ["200510", "0", "14,385,503"], ["200509", "0", "14,312,879"], ["200508", "0", "14,139,440"], ["200507", "0", "14,160,275"], ["200506", "0", "14,176,421"], ["200505", "0", "14,245,261"], ["200504", "0", "14,240,461"], ["200503", "0", "14,037,124"], ["200502", "0", "13,866,467"], ["200501", "0", "14,018,552"], ["200412", "0", "13,836,620"], ["200411", "0", "13,620,661"], ["200410", "0", "13,626,222"], ["200409", "0", "13,553,598"], ["200408", "0", "13,380,159"], ["200407", "0", "13,400,994"], ["200406", "0", "13,417,140"], ["200405", "0", "13,485,980"], ["200404", "0", "13,481,180"], ["200403", "0", "13,277,843"], ["200402", "0", "13,107,186"], ["200401", "0", "13,259,271"], ["200312", "0", "13,077,339"], ["200311", "0", "12,861,380"], ["200310", "0", "12,866,941"], ["200309", "0", "12,794,317"], ["200308", "0", "12,620,878"], ["200307", "0", "12,641,713"], ["200306", "0", "12,657,859"], ["200305", "0", "12,726,699"], ["200304", "0", "12,721,899"], ["200303", "0", "12,518,562"], ["200302", "0", "12,347,905"], ["200301", "0", "12,499,990"], ["200212", "0", "12,318,058"], ["200211", "0", "12,102,099"], ["200210", "0", "12,107,660"], ["200209", "0", "12,035,036"], ["200208", "0", "11,861,597"], ["200207", "0", "11,882,432"], ["200206", "0", "11,898,578"], ["200205", "0", "11,967,418"], ["200204", "0", "11,962,618"], ["200203", "11,759,281", "0"], ["200202", "11,588,624", "0"], ["200201", "11,740,709", "0"], ["200112", "11,558,777", "0"], ["200111", "11,342,818", "0"], ["200110", "11,348,379", "0"], ["200109", "11,275,755", "0"], ["200108", "11,102,316", "0"], ["200107", "11,123,151", "0"], ["200106", "11,139,297", "0"], ["200105", "11,208,137", "0"], ["200104", "11,203,337", "0"]]}
    
    url = location.href
    fetch('/getTable_future').then(function(response) {
      if (url.indexOf('github') >= 0){
        return sampleData["/getTable_future"]
      } else {
        return response.json();
      }
    }).then(function(data) {
      new Vue({
        el: '#tbl',
        data: {"columns": data[0], "values": data.slice(1)},
        template: `
        <table class="table table-striped table-sm table-hover">
        <thead>
          <tr align="right">
            <th v-for = "col in columns">[[col]]</th>
          </tr>
        </thead>
        <tbody>
          <tr align="right" v-for = "line in values">
            <td v-for = "dt in line">[[dt]]</td>
          </tr>
        </tbody>
        </table>`,
        delimiters: ['[[', ']]']
      });
    })
    fetch('/getGraph_future').then(function(response) {
      if (url.indexOf('github') >= 0){
        return sampleData["/getGraph_future"]
      } else {
        return response.json();
      }
    }).then(function(data) {
      chart = new Chart('graph', data)
    });
  </script>
</body>
</html>
